<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlarmUkrMap</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
    <style>
        body{
            margin: 0;
            padding: 0;
        }
        #map{
            width: 100%;
            height: 100vh;
        }
    </style>
    
</head>
<body>
    <div id="map"></div>
 <!--  <script src="scrip.js" type="text/javascript"></script>-->
    
    <pre></pre>
</body>
</html>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
<script>
    var map = L.map('map').setView([49, 32], 7);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

let Oblast = [
    {city:'Луганська_область'},
    {city:'м_Миколаїв_та_Миколаївська_територіальна_громада'}
];



var ProxyUrl ='https://cors-anywhere.herokuapp.com/';
var TargetUrl = 'https://alarmmap.online/assets/json/_alarms/siren.json?0.7152377075796739';
    MapTile = 'https://github.com/wmgeolab/geoBoundaries/raw/6b002b1eee2fd9599f1a3af8fe076d694e6decee/releaseData/gbOpen/UKR/ADM1/geoBoundaries-UKR-ADM1_simplified.geojson'
    Urls = 'https://alarmmap.online/assets/json/_alarms/siren.json?0.7152377075796739'

    var key = 255;
let clone = {};
var arr = new Array(50);
function getAlarm(ProxyUrl,TargetUrl,arr){
    fetch(ProxyUrl + TargetUrl)
    .then((response) => {
        return response.json();
      })
      .then((data) => {
        console.log(data[0].district);
        arr = data;

        for (let key in arr) {
            clone[key] = data[key].district;
          }
          console.log(clone)
        for(let key in arr){
            data[key]== Oblast[key]
              //  console.log(Oblast[key]);
                list(Oblast);
        }
     
      });
}

getAlarm(ProxyUrl,TargetUrl)


setInterval(console.log(clone), 100)
      fetch(ProxyUrl + MapTile)
      .then(Blob => Blob.json())
      .then(data =>{
          L.geoJson(data).addTo(map)
      });

//можно в эти функции добавить сами тайлы на область а не на всю карту

function list(Oblast){
    for(var i=0;i<50;i++){
        if(Oblast[i]==Oblast[0]){
            var marlugansk = L.marker([48.799,39.089]).addTo(map);
        }
        if(Oblast[i]==Oblast[1]){
            var marnikolaev = L.marker([46.9659100,31.9974000]).addTo(map).bindPopup('Повітряна тривога');
        }
    }
}


        
</script>
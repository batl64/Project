<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Refresh" content="15" />
    <title>AlarmUkrMap</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
    <style>
        body{
            margin: 0;
            padding: 0;
        }
        #map{
            width: 100%;
            height: 100vh;
        }
    </style>
    
</head>
<body>
    <div id="map"></div>
 <!--  <script src="scrip.js" type="text/javascript"></script>-->
    
    <pre></pre>
</body>
</html>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
<script>
    var map = L.map('map').setView([49, 32], 7);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

let Oblast = [
    {city:'Луганська_область'},
    {city:'м_Миколаїв_та_Миколаївська_територіальна_громада'},
    {city:'Полтавська_область'},
    {city:'Вінницька_область'},
    {city:'Волинська_область'},
    {city:'Дніпропетровська_область'},
    {city:'Донецька_область'},
    {city:'Житомирська_область'},
    {city:'Закарпатська_область'},
    {city:'Запорізька_область'},
    {city:'Івано-Франківська_область'},
    {city:'Київська_область'},
    {city:'Кіровоградська_область'},
    {city:'Львівська_область'},
    {city:'Миколаївська_область'},
    {city:'Одеська_область'},
    {city:'Рівненська_область'},
    {city:'Сумська_область'},
    {city:'Тернопільська_область'},
    {city:'Харківська_область'},
    {city:'Херсонська_область'},
    {city:'Хмельницька_область'},
    {city:'Черкаська_область'},
    {city:'Чернігівська_область'},
    {city:'м_Київ'},
];



var ProxyUrl ='https://cors-anywhere.herokuapp.com/';
var TargetUrl = 'https://alarmmap.online/assets/json/_alarms/siren.json?0.7152377075796739';
    MapTile = 'https://github.com/wmgeolab/geoBoundaries/raw/6b002b1eee2fd9599f1a3af8fe076d694e6decee/releaseData/gbOpen/UKR/ADM1/geoBoundaries-UKR-ADM1_simplified.geojson'
    Urls = 'https://alarmmap.online/assets/json/_alarms/siren.json?0.7152377075796739'

    var key = 255;
let clone = {};
var arr = new Array(50);
function getAlarm(ProxyUrl,TargetUrl,arr){
    fetch(ProxyUrl + TargetUrl)
    .then((response) => {
        return response.json();
      })
      .then((data) => {
        console.log(data[0].district);
        arr = data;

        for (let key in arr) {
            clone[key] = data[key].district;
          }
          console.log(clone)
        for(let key in arr){
            data[key]== Oblast[key]
              //  console.log(Oblast[key]);
               //    list(Oblast);
                setInterval(list,100);
        }
     
      });
}

getAlarm(ProxyUrl,TargetUrl)


setInterval(console.log(clone), 100)
      fetch(ProxyUrl + MapTile)
      .then(Blob => Blob.json())
      .then(data =>{
          L.geoJson(data).addTo(map)
      });

//можно в эти функции добавить сами тайлы на область а не на всю карту

function list(data){
    for(var i=0;i<50;i++){
        if(clone[i] ==Oblast[0].city){
            var marlugansk = L.marker([48.799,39.089]).addTo(map);
        }
        else if(clone[i] == Oblast[1].city){
            var marnikolaev = L.marker([46.9659100,31.9974000]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[2].city){
            var marpoltava = L.marker([49.5937300,34.5407300]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[3].city){
            var marvinnitsa = L.marker([49.2327800,28.4809700]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[4].city){
            var marvolin = L.marker([50.7593200,25.3424400]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[5].city){
            var mardnepropetrovsk = L.marker([48.4500000,34.9833300]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[6].city){
            var mardonetsk = L.marker([48.0230000,37.8022400]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[7].city){
            var marzhytomyr = L.marker([50.2648700,28.6766900]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[8].city){
            var marcarpatians = L.marker([48.6166700,22.3000000]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[9].city){
            var marzaporozhye = L.marker([47.8228900,35.1903100]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[10].city){
            var marivano_fronkovsk = L.marker([48.9215000,24.7097200]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[11].city){
            var markiev_oblast = L.marker([50.4546600,30.5238000]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[12].city){
            var markirovograd = L.marker([48.5132000,32.2597000]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[13].city){
            var marlvov = L.marker([49.8382600,24.0232400]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[14].city){
            var marnikolaev_obl = L.marker([46.9659100,31.9974000]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[15].city){
            var marodessa = L.marker([46.4774700,30.7326200]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[16].city){
            var marrovni = L.marker([50.6230800,26.2274300]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[17].city){
            var marsumi = L.marker([50.9216000,34.8002900]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[18].city){
            var marternopol = L.marker([49.5558900,25.6055600]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[19].city){
            var marharkov = L.marker([49.9808100,36.2527200]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[20].city){
            var marherson = L.marker([46.6558100,32.6178000]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[21].city){
            var marhmelnitsk = L.marker([49.4216100,26.9965300]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[22].city){
            var marcherkas = L.marker([49.4285400,32.0620700]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[23].city){
            var marchernigov = L.marker([51.5055100,31.2848700]).addTo(map).bindPopup('Повітряна тривога');
        }
        else if(clone[i] == Oblast[24].city){
            var marm_kiev = L.marker([50.4546600,30.5238000]).addTo(map).bindPopup('Повітряна тривога');
        }
        
    }
}


        
</script>